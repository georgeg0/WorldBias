installed.packages("rmarkdown")
# Libraries we will use
library(foreign)
if(!require(memisc)){install.packages("memisc", repos="http://R-Forge.R-project.org")}
library("memisc")
if(!require(plyr)){install.packages("plyr")}
library(plyr)
library(dplyr)
# ---------- Set path for a) where this file is and b) where the data is
if(TRUE) {
setwd("/home/tom/Dropbox/WorldBias") #tom's computer
dataloc='/home/tom/Dropbox/university/expts/WorldBias/data' #where a folder called /raw is
} else {
setwd("/george/Desktop/RACIAL-IAT/")
dataloc='/george/Desktop/RACIAL-IAT/data'
}
files <- list.files(path=file.path(dataloc,"cleansed"), pattern = "\\.csv$")
files <- Sys.glob(paste(dataloc,"/cleansed/*.", "csv", sep = ""))
files
DF <-  read.csv(files[1])
file.path(dataloc,"Race.IAT.2004-2015.csv")
files <- Sys.glob(paste(dataloc,"/cleansed/*.", "csv", sep = ""))
DF <-  read.csv(files[1])
for (f in files[-1]) DF <- rbind(DF, read.csv(f))
write.csv(DF, file.path(dataloc,"Race.IAT.2004-2015.csv"), row.names=FALSE, quote=FALSE)
datafile="Race.IAT.2004-2015.csv"
df <- read.csv(file.path(dataloc,datafile), header=TRUE)
#df2 <- df[grep("White-Not of Hispanic Origin|Black", df$raceomb), ]
dfwhite <- df[which(df$ethnic == "White-Not of Hispanic Origin"|df$ethnic == "White"), ]
write.csv(dfwhite, file.path(dataloc,"Race.IAT.2004-2015-white.csv"), row.names=FALSE, quote=FALSE)
datafile="Race.IAT.2004-2015-white.csv"
df <- read.csv(file.path(dataloc,datafile), header=TRUE)
dfeurope <- df[grep("AL|AD|AT|BY|BE|BA|BG|HR|CZ|DK|EE|FI|FR|DE|GR|HU|IS|IE|IT|LV|LI|LT|LU|MT|MD|MC|ME|MK|AN|NL|NO|PL|PT|RO|RU|SM|RS|SK|SI|ES|SE|CH|UA|UK", df$countrycit), ]
write.csv(dfeurope, file.path(dataloc,"Race.IAT.2004-2015-white-europe.csv"), row.names=FALSE, quote=FALSE)
df <- read.csv(file.path(dataloc,"Race.IAT.2004-2015-white-europe.csv"), header=TRUE)
dfstats <- count(df,"countrycit")
write.csv(dfstats, file.path(dataloc,"Race.IAT.2004-2015-white-europe-stats.csv"), row.names=FALSE, quote=FALSE)
gtd <- df <- read.csv(file.path(dataloc,"Race.IAT.2004-2015-white-europe.csv"), header=TRUE)
dfagg <- aggregate(D_biep.White_Good_all~countrycit,gtd,mean)
write.csv(dfagg, file.path(dataloc,"Race.IAT.2004-2015-white-europe-aggregate.csv"), row.names=FALSE, quote=FALSE)
setwd("/home/tom/Dropbox/WorldBias") #tom's computer
gtd <- read.csv(file.path(dataloc,"Race.IAT.2004-2015-white-europe.csv"))
world      <- readOGR(dsn=path.expand("Europe"),layer="Europe")
library(rgdal)
